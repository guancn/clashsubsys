# ============================================================
# 新系统并行运行环境变量配置
# 所有端口都与现有系统错开，确保无冲突
# ============================================================

# 项目信息
PROJECT_NAME=clash-converter-v2
COMPOSE_PROJECT_NAME=clash-v2
ENVIRONMENT=parallel

# 端口配置 - 与现有系统错开
# 现有系统占用: 25500(后端), 8080(前端), 80/443(nginx)
BACKEND_PORT=8002          # 新系统后端端口
FRONTEND_PORT=3002         # 新系统前端端口
NGINX_PORT=8081           # 新系统HTTP端口  
NGINX_HTTPS_PORT=8443     # 新系统HTTPS端口
MONITOR_PORT=9091         # 监控端口 (避开9090)

# API配置
API_PREFIX=/clash-v2/api
FRONTEND_PREFIX=/clash-v2
BASE_URL=http://localhost:${BACKEND_PORT}

# 资源限制 - 为双系统运行优化
BACKEND_CPU_LIMIT=0.8
BACKEND_MEMORY_LIMIT=400m
BACKEND_CPU_RESERVE=0.2
BACKEND_MEMORY_RESERVE=200m

FRONTEND_CPU_LIMIT=0.4
FRONTEND_MEMORY_LIMIT=200m
FRONTEND_CPU_RESERVE=0.1
FRONTEND_MEMORY_RESERVE=100m

NGINX_CPU_LIMIT=0.4
NGINX_MEMORY_LIMIT=200m
NGINX_CPU_RESERVE=0.1
NGINX_MEMORY_RESERVE=100m

# Docker网络配置
NETWORK_NAME=clash-network-v2
NETWORK_SUBNET=172.25.0.0/24
BRIDGE_NAME=clash-bridge-v2

# 存储配置
BACKEND_LOGS_PATH=./backend-v2/logs
CONFIG_PATH=./backend/config.yaml
NGINX_CONFIG_PATH=./deploy-v2/nginx.conf
SSL_PATH=./deploy-v2/ssl

# 安全配置
RUN_AS_USER=10001
RUN_AS_GROUP=10001
CONTAINER_SECURITY=true
READONLY_ROOT=true

# 日志配置
LOG_LEVEL=INFO
LOG_MAX_SIZE=10m
LOG_MAX_FILES=3
LOG_DRIVER=json-file

# 健康检查配置
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=15s

# 构建参数
BUILD_MODE=parallel
VITE_API_BASE_URL=http://localhost:${BACKEND_PORT}
VITE_APP_PREFIX=${FRONTEND_PREFIX}

# 调试模式
DEBUG=false
VERBOSE_LOGS=false

# 数据库配置（如果需要）
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=clash_converter_v2

# Redis配置（如果需要）
# REDIS_HOST=localhost  
# REDIS_PORT=6380    # 避开默认6379

# 备份配置
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=7
BACKUP_PATH=./backups-v2

# 监控配置
METRICS_ENABLED=false
METRICS_PORT=${MONITOR_PORT}
METRICS_PATH=/metrics

# SSL配置
SSL_ENABLED=false
SSL_CERT_PATH=${SSL_PATH}/cert.pem
SSL_KEY_PATH=${SSL_PATH}/key.pem

# 时区设置
TZ=Asia/Shanghai